@model LanguageCenter.Areas.Home.Models.NewsFeedModel.NewsFeedModel


@{
    ViewData["Title"] = "Tạo mới sản phẩm";
    Layout = "~/Views/Shared/_Layout3.cshtml";
}


<div class="modal-body" style="overflow-y:auto">
    <form method="post" id="NewsFeedForm" action="@Url.Action("NewsFeed")">
        @*@Html.AntiForgeryToken()*@
        @Html.HiddenFor(x => x.NewFeedID)
        @Html.HiddenFor(x => x.IsEdit)
        <div class="form-outline mb-4">
            <label class="form-label" for="form1Example1">Tiêu đề tin tức</label>
            <input type="text" name="Title" id="Title" value="@Model.Title" autofocus class="form-control" tabindex="1" />
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="form1Example2">Mã tin tức</label>
            <input type="text" name="Code" id="Code" value="@Model.Code" class="form-control" tabindex="2" />
        </div>
        <div id="Description-grp">
            <div class="form-outline mb-4">
                <label class="form-label" for="form1Example2">Nội dụng</label>
                <textarea class="ckeditor" id="Description" value="@Model.Description" name="Description"></textarea>
            </div>
        </div>
        
    </form>
    <div class="modal-footer">
        <button id="btnSave" name="submit" value="Save" class="btn-save-popup" form="NewsFeedForm" tabindex="6"><span class="OpenSans">Lưu</span></button>
        <a name="submit" value="Save" class="btn-exit-popup" tabindex="7"><span class="OpenSans">Thoát</span></a>
    </div>
</div>


<script src="~/Scripts/ckeditor/ckeditor.js"></script>
<script src="~/Scripts/ckfinder/ckfinder.js"></script>
<script>
    $(document).ready(function () {
        var valid = function () {
            $("#NewsFeedForm").validate({
                rules: {
                    Title: { required: true, maxlength: 255 },
                    Code: { required: true, maxlength: 255 },
                    Description: { required: true, maxlength: 4000 },
                },
                messages: {
                    Title: {
                        required: "Tiêu đề không được để trống !",
                        maxlength: "Tiêu đề không được quá 255 ký tự !",
                    },
                    Code: {
                        required: "Mã không được để trống !",
                        maxlength: "Mã không được quá 255 ký tự !",
                    },
                    Description: {
                        required: "Nội dung không được để trống !",
                        maxlength: "Nội dung không được quá 4000 ký tự !",
                    },

                },
                errorPlacement: function (error, element) {
                    if (element.attr("name") === "Description") {
                        error.insertAfter("#Description-grp");
                    } else
                    error.insertAfter(element, "label-error");
                }
            })
        };
        valid();
 

        $('#btnSave').off('click').on('click', function (e) {
            debugger
            //e.preventDefault();
            $("#Description").val(CKEDITOR.instances.Description.getData());
            var isValid = $('#NewsFeedForm').valid();
            if (!isValid) {
                //$("select.error + span")
                //    .find('span.select2-selection--single')
                //    .css('cssText', 'border: 1px solid #f58a73 !important');
                return false;
            }
         
           
            });
    });
</script>